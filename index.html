<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Track Writing</title>

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="favicon.svg">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:ital,wght@0,400;0,600;1,400&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

  <!-- Styles -->
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <!-- HEADER -->
  <header class="app-header">
    <h1 class="app-title">Track Writing</h1>
    <p class="app-subtitle animated-subtitle" id="animatedSubtitle">
      <!-- Option 1: Truck → Track -->
      <span class="subtitle-option" data-option="1">
        <span class="subtitle-deleted" data-word="Truck">Truck</span><span class="subtitle-inserted" data-word="Track"></span><span class="subtitle-rest"> your text changes</span>
      </span>
      <!-- Option 2: Forget → Remember -->
      <span class="subtitle-option" data-option="2">
        <span class="subtitle-deleted" data-word="Forget">Forget</span><span class="subtitle-inserted" data-word="Remember"></span><span class="subtitle-rest"> what you changed</span>
      </span>
    </p>
  </header>

  <!-- APP CONTAINER -->
  <div class="app-container">

    <!-- LEFT PANEL: Original (top) + Revised (bottom) -->
    <div class="left-panel">

      <!-- Original Text Window -->
      <div class="macos-window" id="originalWindow">
        <div class="window-header">
          <div class="traffic-lights">
            <button class="traffic-light close" aria-label="Close" disabled></button>
            <button class="traffic-light minimize" aria-label="Minimize" disabled></button>
            <button class="traffic-light maximize" aria-label="Maximize" data-target="original"></button>
          </div>
          <span class="window-title">Original</span>
          <span class="window-word-count" id="originalWordCount">0 words</span>
        </div>
        <div class="window-body">
          <textarea
            id="originalText"
            class="text-input"
            placeholder="Paste your original text here..."
            spellcheck="false"
          ></textarea>
        </div>
      </div>

      <!-- Revised Text Window -->
      <div class="macos-window" id="revisedWindow">
        <div class="window-header">
          <div class="traffic-lights">
            <button class="traffic-light close" aria-label="Close" disabled></button>
            <button class="traffic-light minimize" aria-label="Minimize" disabled></button>
            <button class="traffic-light maximize" aria-label="Maximize" data-target="revised"></button>
          </div>
          <span class="window-title">Revised</span>
          <span class="window-word-count" id="revisedWordCount">0 words</span>
        </div>
        <div class="window-body">
          <textarea
            id="revisedText"
            class="text-input"
            placeholder="Paste your revised text here..."
            spellcheck="false"
          ></textarea>
        </div>
      </div>

    </div>

    <!-- RIGHT PANEL: Comparison -->
    <div class="right-panel">

      <!-- Comparison Window -->
      <div class="macos-window" id="comparisonWindow">
        <div class="window-header">
          <div class="traffic-lights">
            <button class="traffic-light close" aria-label="Close" disabled></button>
            <button class="traffic-light minimize" aria-label="Minimize" disabled></button>
            <button class="traffic-light maximize" aria-label="Maximize" data-target="comparison"></button>
          </div>
          <span class="window-title">Comparison</span>
          <div class="comparison-toggle">
            <button type="button" class="toggle-btn active" data-mode="visible">Show</button>
            <button type="button" class="toggle-btn" data-mode="hidden">Hide</button>
          </div>
        </div>
        <div class="window-body">
          <div class="comparison-output diff-visible" id="comparisonOutput">
            <div class="empty-state">
              <div class="empty-state-icon">&#8644;</div>
              <p>Enter text in both panels to see comparison</p>
            </div>
          </div>
        </div>
        <div class="comparison-footer" id="comparisonFooter">
          <!-- Legend with stats rendered dynamically -->
        </div>
      </div>

    </div>

  </div>

  <!-- FOOTER -->
  <footer class="app-footer">
    <p>Word-level diff with paragraph move detection</p>
  </footer>

  <!-- MAXIMIZE MODAL -->
  <div class="modal-overlay" id="modalOverlay">
    <div class="modal-window" id="modalWindow">
      <div class="window-header">
        <div class="traffic-lights">
          <button class="traffic-light close" aria-label="Close" id="modalClose"></button>
          <button class="traffic-light minimize" aria-label="Minimize" disabled></button>
          <button class="traffic-light maximize" aria-label="Maximize" disabled></button>
        </div>
        <span class="window-title" id="modalTitle">Window</span>
        <!-- Word count for text windows -->
        <span class="window-word-count" id="modalWordCount" style="display: none;">0 words</span>
        <!-- Toggle for comparison window -->
        <div class="comparison-toggle" id="modalToggle" style="display: none;">
          <button type="button" class="toggle-btn active" data-mode="visible">Show</button>
          <button type="button" class="toggle-btn" data-mode="hidden">Hide</button>
        </div>
      </div>
      <div class="modal-body" id="modalBody">
        <!-- Content cloned here -->
      </div>
      <!-- Footer for comparison window -->
      <div class="comparison-footer" id="modalFooter" style="display: none;">
        <!-- Legend rendered here -->
      </div>
    </div>
  </div>

  <!-- JavaScript Modules -->
  <script src="js/tokenizer.js"></script>
  <script src="js/diff-engine.js"></script>
  <script src="js/renderer.js"></script>
  <script src="js/app.js"></script>

  <!-- Vercel Analytics -->
  <script defer src="/_vercel/insights/script.js"></script>
</body>
</html>
